(this["webpackJsonpedirect-challenge"]=this["webpackJsonpedirect-challenge"]||[]).push([[0],{29:function(e,t,n){e.exports=n.p+"static/media/cat.7dd6c46e.png"},32:function(e,t,n){e.exports=n(51)},41:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(16),o=n.n(r),l=n(7),s=n(13),u=(n(41),n(10));n(42);var i=Object(u.g)((function(e){return c.a.createElement("div",{className:"header"},c.a.createElement("h4",null,"ToDo Manager"),["/","/signin","/signup"].includes(e.location.pathname)?"":c.a.createElement(l.b,{to:"/"},"Log Out"))})),m=n(29),p=n.n(m);n(44);var f=function(){return c.a.createElement("div",{className:"footer"},c.a.createElement("img",{src:p.a,alt:"logo"}),c.a.createElement("span",null,"Icon made by"," ",c.a.createElement("a",{href:"https://www.flaticon.com/authors/freepik"},"Freepik")," from"," ",c.a.createElement("a",{href:"https://www.flaticon.com"},"www.flaticon.com")))};n(45);var d=function(){var e=Object(u.f)();return c.a.createElement("div",{className:"homepage"},c.a.createElement("h1",null,"ToDo Manager"),c.a.createElement("div",{className:"break"}),c.a.createElement("button",{className:"signup",onClick:function(){e.push("/signup")}},"Sign Up"),c.a.createElement("button",{className:"signin",onClick:function(){e.push("/signin")}},"Sign In"))};n(46);var E=function(){return c.a.createElement("div",{className:"not-found"},"Oops! Not Found!")},b=n(5),h="http://localhost:4000";var j=function(e){var t=Object(u.f)(),n=Object(a.useState)(),r=Object(b.a)(n,2),o=r[0],l=r[1],s=Object(a.useState)(),i=Object(b.a)(s,2),m=i[0],p=i[1],f=Object(a.useState)(""),d=Object(b.a)(f,2),E=d[0],j=d[1];return c.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},c.a.createElement("form",{onSubmit:function(n){n.preventDefault(),"signup"===e.mode?fetch("".concat(h,"/person"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:m})}).then((function(e){200===e.status?t.push({pathname:"/projects",state:{username:o}}):403===e.status&&j("Username already taken")})).catch((function(e){console.error(e)})):"signin"===e.mode&&fetch("".concat(h,"/person/").concat(o),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:m})}).then((function(e){200===e.status?t.push({pathname:"/projects",state:{username:o}}):403===e.status&&(j("Wrong username or password"),l(""),p(""))})).catch((function(e){console.error(e)}))},style:{display:"flex",flexDirection:"column",margin:"150px auto"}},""!==E?c.a.createElement("div",{className:"alert alert-danger",role:"alert"},E):"",c.a.createElement("label",{htmlFor:"username"},"Username"),c.a.createElement("input",{type:"text",name:"username",className:"form-control",value:o,onChange:function(e){l(e.target.value)}}),c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{type:"password",name:"password",className:"form-control",value:m,onChange:function(e){p(e.target.value)}}),c.a.createElement("input",{type:"submit",value:"signup"===e.mode?"Sign Up":"Sign In",className:"btn btn-primary",style:{margin:"20px 0"}})))},g=n(9),v=n(6),y=n(24),O=n.n(y),N=n(30);function S(e){return w.apply(this,arguments)}function w(){return(w=Object(N.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t.json());case 2:if(400!==t.status){e.next=7;break}return e.next=5,t.text();case 5:throw n=e.sent,new Error(n);case 7:throw new Error("Network response was not ok.");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){throw console.error("API call failed. "+e),e}function k(e){return function(t){return function(e){return fetch("".concat(h,"/person/").concat(e)).then(S).catch(C)}(e).then((function(e){t(function(e){return{type:"LOAD_PROJECTS_SUCCESS",projects:e}}(e))})).catch((function(e){throw e}))}}var x=function(e){var t=e.projects,n=e.username;return c.a.createElement("ul",null,t.map((function(e,t){return c.a.createElement("li",{key:t},c.a.createElement("h4",null,c.a.createElement(l.b,{to:{pathname:"/project/"+e.name,state:{username:n,project:e}}},e.name)))})))},D=(n(48),function(){return c.a.createElement("div",{className:"loader"},"Loading...")});var T={createProject:function(e){return{type:"CREATE_PROJECT",project:e}},loadProjects:k},P=Object(s.b)((function(e){return{projects:e.projects}}),T)((function(e){var t=Object(a.useState)(!0),n=Object(b.a)(t,2),r=n[0],o=n[1];Object(a.useEffect)((function(){e.loadProjects(e.location.state.username).then((function(){o(!1)})).catch((function(e){console.error("Loading projects failed: "+e)}))}),[e]);var l=Object(a.useState)({id:"",name:"",todos:[],done:[]}),s=Object(b.a)(l,2),u=s[0],i=s[1];return c.a.createElement("div",{style:{margin:"30px"},className:"container"},r?c.a.createElement(D,null):c.a.createElement("form",{onSubmit:function(t){t.preventDefault(),fetch("".concat(h,"/person/").concat(e.location.state.username,"/projects"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify([].concat(Object(g.a)(e.projects),[u]))})}},c.a.createElement("h1",null,"Projects"),c.a.createElement("label",{htmlFor:"projectName"},"Add Project"),c.a.createElement("input",{type:"text",name:"projectName",className:"form-control",value:u.name,onChange:function(e){e.preventDefault();var t=Object(v.a)({},u,{name:e.target.value,id:(new Date).toISOString()});i(t)}}),c.a.createElement("input",{type:"submit",value:"Save",className:"btn btn-secondary"}),c.a.createElement(x,{projects:e.projects,username:e.location.state.username})))})),A=n(19),J=n.n(A);n(50);var R={loadProjects:k},F=Object(s.b)((function(e){return{projects:e.projects}}),R)((function(e){var t=Object(u.f)(),n=e.location.state.username,r=Object(a.useState)(e.location.state.project),o=Object(b.a)(r,2),l=o[0],s=o[1],i=Object(a.useState)({id:"",name:"",createdAt:"",doneAt:""}),m=Object(b.a)(i,2),p=m[0],f=m[1],d=Object(a.useState)(""),E=Object(b.a)(d,2),j=E[0],y=E[1];Object(a.useEffect)((function(){e.loadProjects(n).catch((function(e){console.error("Loading projects failed: "+e)}))}),[e,n]);var O=function(){t.push({pathname:"/projects",state:{username:n}})};return c.a.createElement("div",{style:{margin:"30px"}},c.a.createElement("button",{className:"btn btn-warning",onClick:O},"Go back"),c.a.createElement("b",{style:{color:"#112f50",display:"block"}},"You must use this button to go back instead of the browser's."),c.a.createElement("b",{style:{color:"#112f50",display:"block"}},'You must use click on "Save Project" to save your changes to the project.'),c.a.createElement("h1",null,"Manage project"),c.a.createElement("h4",null,"Project Name"),c.a.createElement("input",{type:"text",name:"projectName",className:"form-control",value:l.name,onChange:function(e){e.preventDefault();var t=Object(v.a)({},l,{name:e.target.value});s(t)}}),c.a.createElement("h4",null,"ToDo"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=Object(v.a)({},l,{todos:[].concat(Object(g.a)(l.todos),[p])});s(t)}},c.a.createElement("label",{htmlFor:"todo"},"Add ToDo"),c.a.createElement("input",{type:"text",name:"todo",className:"form-control",value:p.name,onChange:function(e){e.preventDefault();var t=Object(v.a)({},p,{id:(new Date).toISOString(),name:e.target.value,createdAt:J()()});f(t)}}),c.a.createElement("input",{type:"submit",value:"Save",className:"btn btn-secondary"})),l.todos.length>0?c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"ToDo"),c.a.createElement("th",{style:{display:"flex"}},c.a.createElement("p",{style:{marginTop:"18px"}},"Edit Name"),c.a.createElement("input",{style:{marginTop:"10px",marginLeft:"15px"},type:"text",className:"form-control",value:j,onChange:function(e){e.preventDefault(),y(e.target.value)}})),c.a.createElement("th",null,"Mark as Done"),c.a.createElement("th",null,"Delete"))),c.a.createElement("tbody",null,l.todos.map((function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("td",null,e.name),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(){!function(e){var t=Object(v.a)({},e,{name:j}),n=l.todos.map((function(e){return e.id===t.id?t:e})),a=Object(v.a)({},l,{todos:n});s(a),y("")}(e)}},c.a.createElement("i",{className:"icon-edit"}))),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(){!function(e){var t=Object(v.a)({},e,{doneAt:J()()}),n=l.todos.filter((function(e){return e.id!==t.id})),a=[].concat(Object(g.a)(l.done),[t]),c=Object(v.a)({},l,{todos:n,done:a});s(c)}(e)}},c.a.createElement("i",{className:"icon-thumbs-up"}))),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(){!function(e){var t=e,n=l.todos.filter((function(e){return e.id!==t.id})),a=Object(v.a)({},l,{todos:n});s(a)}(e)}},c.a.createElement("i",{className:"icon-trash"}))))})))):"",l.done.length>0?c.a.createElement("h4",null,"Done"):"",c.a.createElement("ul",{className:"done-items"},l.done.map((function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("li",{style:{textDecoration:"line-through"}},e.name,c.a.createElement("span",null,J()(e.doneAt).fromNow())))}))),c.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},c.a.createElement("button",{className:"btn btn-success",onClick:function(t){t.preventDefault();var a=e.projects.filter((function(e){return e.id!==l.id}));fetch("".concat(h,"/person/").concat(n,"/projects"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify([].concat(Object(g.a)(a),[l]))}),O()},style:{marginRight:"20px"}},"Save Project"),c.a.createElement("button",{className:"btn btn-danger",onClick:function(){var t=e.projects.filter((function(e){return e.id!==l.id}));fetch("".concat(h,"/person/").concat(n,"/projects"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(g.a)(t))}),O()},style:{marginRight:"20px"}},"Delete Project"),c.a.createElement("button",{className:"btn btn-secondary",onClick:O},"Cancel")))}));var I=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(i,null),c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:"/",component:d}),c.a.createElement(u.a,{path:"/signup",render:function(e){return c.a.createElement(j,Object.assign({},e,{mode:"signup"}))}}),c.a.createElement(u.a,{path:"/signin",render:function(e){return c.a.createElement(j,Object.assign({},e,{mode:"signin"}))}}),c.a.createElement(u.a,{path:"/projects",component:P}),c.a.createElement(u.a,{path:"/project/:id",component:F}),c.a.createElement(u.a,{path:"/project",component:F}),c.a.createElement(u.a,{component:E})),c.a.createElement(f,null))},L=n(11),U=n(31);var _=Object(L.c)({projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_PROJECT":var n=[].concat(Object(g.a)(e),[t.project]);return n;case"LOAD_PROJECTS_SUCCESS":return t.projects;default:return e}}});var M,Y=Object(L.d)(_,M,Object(L.a)(U.a));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(s.a,{store:Y},c.a.createElement(l.a,null,c.a.createElement(I,null)))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.ed7b6f1a.chunk.js.map